{% extends 'persons/base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª—é–¥—å–º–∏{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1 class="mb-4">–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª—é–¥—å–º–∏ —Å –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é</h1>
        
        <div class="alert alert-info">
            <h4>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã:</h4>
            <ul>
                <li><strong>–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:</strong> –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ñ–∞–º–∏–ª–∏–∏, –∏–º–µ–Ω–∏, –æ—Ç—á–µ—Å—Ç–≤–∞, —Ç–µ–ª–µ—Ñ–æ–Ω–∞, email</li>
                <li><strong>–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤:</strong> –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DaData –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏–∏ –∞–¥—Ä–µ—Å–æ–≤</li>
                <li><strong>–î–µ–¥—É–±–ª–∏–∫–∞—Ü–∏—è:</strong> –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ –≥—Ä—É–ø–ø—ã –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º</li>
                <li><strong>–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:</strong> –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏</li>
                <li><strong>REST API:</strong> –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä endpoints –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏</li>
            </ul>
        </div>

        <div class="row mt-4">
            <div class="col-md-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">üîç –í–∏—Ç—Ä–∏–Ω–∞ –ø–æ–∏—Å–∫–∞</h5>
                        <p class="card-text">–ü–æ–∏—Å–∫ —Å –¥–µ–¥—É–±–ª–∏–∫–∞—Ü–∏–µ–π –ø–æ —á–∞—Å—Ç–∏—á–Ω—ã–º –¥–∞–Ω–Ω—ã–º</p>
                        <a href="/list/" class="btn btn-success">–í–∏—Ç—Ä–∏–Ω–∞</a>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">‚ûï –î–æ–±–∞–≤–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞</h5>
                        <p class="card-text">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –¥–µ–¥—É–±–ª–∏–∫–∞—Ü–∏–µ–π</p>
                        <a href="/create/" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</a>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">üìã –°–ø–∏—Å–æ–∫ –ª—é–¥–µ–π</h5>
                        <p class="card-text">–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ç–µ–∫—É—â–∏—Ö –∑–∞–ø–∏—Å–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ</p>
                        <a href="/list/" class="btn btn-secondary">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">üìñ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</h5>
                        <p class="card-text">REST API endpoints –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</p>
                        <button class="btn btn-info" onclick="showApiDocs()">–ü–æ–∫–∞–∑–∞—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="api-docs" class="mt-4" style="display: none;">
            <h3>API Endpoints –¥–ª—è –≤–∏—Ç—Ä–∏–Ω—ã:</h3>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>–ú–µ—Ç–æ–¥</th>
                            <th>URL</th>
                            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                            <th>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="badge bg-success">GET</span></td>
                            <td>/api/persons/search/</td>
                            <td><strong>–í–∏—Ç—Ä–∏–Ω–∞ –ø–æ–∏—Å–∫–∞</strong> - –¥–µ–¥—É–±–ª–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</td>
                            <td>last_name, first_name, middle_name, address, phone, email, limit, offset</td>
                        </tr>
                        <tr>
                            <td><span class="badge bg-primary">POST</span></td>
                            <td>/api/persons/</td>
                            <td>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ —Å –∞–≤—Ç–æ–¥–µ–¥—É–±–ª–∏–∫–∞—Ü–∏–µ–π</td>
                            <td>JSON: last_name, first_name, birth_date, gender, address, phone?, email?</td>
                        </tr>
                        <tr>
                            <td><span class="badge bg-info">GET</span></td>
                            <td>/api/persons/list/</td>
                            <td>–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Ç–µ–∫—É—â–∏—Ö –ª—é–¥–µ–π</td>
                            <td>–ù–µ—Ç</td>
                        </tr>
                        <tr>
                            <td><span class="badge bg-warning">GET</span></td>
                            <td>/api/persons/{group_id}/as-of/</td>
                            <td>–°–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏</td>
                            <td>timestamp (ISO 8601)</td>
                        </tr>
                        <tr class="table-secondary">
                            <td colspan="4"><strong>API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–¥—Ä–µ—Å–∞–º–∏ (DaData)</strong></td>
                        </tr>
                        <tr>
                            <td><span class="badge bg-success">GET</span></td>
                            <td>/api/address/suggestions/</td>
                            <td>–ü–æ–¥—Å–∫–∞–∑–∫–∏ –∞–¥—Ä–µ—Å–æ–≤ –ø—Ä–∏ –≤–≤–æ–¥–µ</td>
                            <td>query (—Å—Ç—Ä–æ–∫–∞ –ø–æ–∏—Å–∫–∞), count (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)</td>
                        </tr>
                        <tr>
                            <td><span class="badge bg-primary">POST</span></td>
                            <td>/api/address/clean/</td>
                            <td>–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥—Ä–µ—Å–∞</td>
                            <td>JSON: address</td>
                        </tr>
                        <tr>
                            <td><span class="badge bg-info">GET</span></td>
                            <td>/api/address/geocode/</td>
                            <td>–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø–æ –∞–¥—Ä–µ—Å—É</td>
                            <td>address (—Å—Ç—Ä–æ–∫–∞ –∞–¥—Ä–µ—Å–∞)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <h4>–ü—Ä–∏–º–µ—Ä—ã –ø–æ–∏—Å–∫–∞ –≤ –≤–∏—Ç—Ä–∏–Ω–µ:</h4>
            <div class="row">
                <div class="col-md-6">
                    <pre class="bg-light p-3"><code># –ü–æ–∏—Å–∫ –ø–æ —Ñ–∞–º–∏–ª–∏–∏
GET /api/persons/search/?last_name=–ò–≤–∞–Ω

# –ü–æ–∏—Å–∫ –ø–æ —Ñ–∞–º–∏–ª–∏–∏ –∏ –∏–º–µ–Ω–∏  
GET /api/persons/search/?last_name=–ü–µ—Ç—Ä–æ–≤&first_name=–ò–≤–∞–Ω

# –ü–æ–∏—Å–∫ –ø–æ –∞–¥—Ä–µ—Å—É
GET /api/persons/search/?address=–ú–æ—Å–∫–≤–∞

# –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
GET /api/persons/search/?phone=89154233426</code></pre>
                </div>
                <div class="col-md-6">
                    <pre class="bg-light p-3"><code># –ü–æ–∏—Å–∫ –ø–æ email
GET /api/persons/search/?email=@gmail.com

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫
GET /api/persons/search/?last_name=–ü–µ—Ç—Ä&address=–ú–æ—Å–∫–≤–∞

# –° –ª–∏–º–∏—Ç–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
GET /api/persons/search/?last_name=–ò–≤–∞–Ω&limit=10</code></pre>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function showApiDocs() {
    const docs = document.getElementById('api-docs');
    docs.style.display = docs.style.display === 'none' ? 'block' : 'none';
}
</script>
{% endblock %}
